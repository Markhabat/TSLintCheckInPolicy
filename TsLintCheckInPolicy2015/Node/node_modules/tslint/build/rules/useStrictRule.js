var __extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},Rule=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.apply=function(n){var t=new UseStrictWalker(n,this.getOptions());return this.applyWithWalker(t)},t.FAILURE_STRING="missing 'use strict'",t}(Lint.Rules.AbstractRule),UseStrictWalker;exports.Rule=Rule;UseStrictWalker=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.createScope=function(){return{}},t.prototype.visitModuleDeclaration=function(i){var r=i.modifiers,u=r!=null&&r.length>0&&r[0].kind===112;this.getCurrentDepth()!==2||u||this.hasOption(t.OPTION_CHECK_MODULE)&&i.body!=null&&i.body.kind===190&&this.hasOption(t.OPTION_CHECK_MODULE)&&this.handleBlock(i,i.body);n.prototype.visitModuleDeclaration.call(this,i)},t.prototype.visitFunctionDeclaration=function(i){this.getCurrentDepth()===2&&this.hasOption(t.OPTION_CHECK_FUNCTION)&&i.body!=null&&this.handleBlock(i,i.body);n.prototype.visitFunctionDeclaration.call(this,i)},t.prototype.handleBlock=function(n,i){var f=!0,r,u,e;i.statements!=null&&i.statements.length>0&&(r=i.statements[0],r.kind===166&&r.getChildCount()===2&&(u=r.getChildAt(0),e=r.getChildAt(1),u.kind===7&&u.text===t.USE_STRICT_STRING&&e.kind===21&&(f=!1)));f&&this.addFailure(this.createFailure(n.getStart(),n.getFirstToken().getWidth(),Rule.FAILURE_STRING))},t.OPTION_CHECK_FUNCTION="check-function",t.OPTION_CHECK_MODULE="check-module",t.USE_STRICT_STRING="use strict",t}(Lint.ScopeAwareRuleWalker)