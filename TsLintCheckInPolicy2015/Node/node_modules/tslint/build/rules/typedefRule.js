var __extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},Rule=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.apply=function(n){var t=new TypedefWalker(n,this.getOptions());return this.applyWithWalker(t)},t.FAILURE_STRING="missing type declaration",t}(Lint.Rules.AbstractRule),TypedefWalker;exports.Rule=Rule;TypedefWalker=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.visitFunctionDeclaration=function(t){this.handleCallSignature(t);n.prototype.visitFunctionDeclaration.call(this,t)},t.prototype.visitFunctionExpression=function(t){this.handleCallSignature(t);n.prototype.visitFunctionExpression.call(this,t)},t.prototype.visitGetAccessor=function(t){this.handleCallSignature(t);n.prototype.visitGetAccessor.call(this,t)},t.prototype.visitMethodDeclaration=function(t){this.handleCallSignature(t);n.prototype.visitMethodDeclaration.call(this,t)},t.prototype.visitObjectLiteralExpression=function(n){var t=this;n.properties.forEach(function(n){switch(n.kind){case 198:t.visitPropertyAssignment(n);break;case 125:t.visitMethodDeclaration(n);break;case 127:t.visitGetAccessor(n);break;case 128:t.visitSetAccessor(n)}})},t.prototype.visitParameterDeclaration=function(t){(t.type==null||t.type.kind!==7)&&this.checkTypeAnnotation("parameter",t.getEnd(),t.type,t.name);n.prototype.visitParameterDeclaration.call(this,t)},t.prototype.visitPropertyAssignment=function(t){switch(t.initializer.kind){case 151:case 150:this.handleCallSignature(t.initializer)}n.prototype.visitPropertyAssignment.call(this,t)},t.prototype.visitPropertyDeclaration=function(t){var i=t.parent.kind===185?"member-variable-declaration":"property-declaration";this.checkTypeAnnotation(i,t.name.getEnd(),t.type,t.name);n.prototype.visitPropertyDeclaration.call(this,t)},t.prototype.visitSetAccessor=function(t){this.handleCallSignature(t);n.prototype.visitSetAccessor.call(this,t)},t.prototype.visitVariableDeclaration=function(t){t.parent.kind!==171&&this.checkTypeAnnotation("variable-declaration",t.name.getEnd(),t.type,t.name);n.prototype.visitVariableDeclaration.call(this,t)},t.prototype.handleCallSignature=function(n){var t=n.parameters!=null?n.parameters.end:null;this.checkTypeAnnotation("call-signature",t,n.type,n.name)},t.prototype.checkTypeAnnotation=function(n,t,i,r){var u,f;this.hasOption(n)&&i==null&&(u="",r!=null&&r.kind===63&&(u=": '"+r.text+"'"),f=this.createFailure(t,1,"expected "+n+u+" to have a typedef"),this.addFailure(f))},t}(Lint.RuleWalker)