var __extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},OPTION_CHECK_PARAMETERS="check-parameters",Rule=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.apply=function(n){var t=ts.createDocumentRegistry(),i=Lint.createLanguageServiceHost("file.ts",n.getFullText()),r=ts.createLanguageService(i,t);return this.applyWithWalker(new NoUnusedVariablesWalker(n,this.getOptions(),r))},t.FAILURE_STRING="unused variable: ",t}(Lint.Rules.AbstractRule),NoUnusedVariablesWalker;exports.Rule=Rule;NoUnusedVariablesWalker=function(n){function t(t,i,r){n.call(this,t,i);this.skipVariableDeclaration=!1;this.skipParameterDeclaration=!1;this.languageService=r}return __extends(t,n),t.prototype.visitImportDeclaration=function(t){this.hasModifier(t.modifiers,76)||this.validateReferencesForVariable(t.name.text,t.name.getStart());n.prototype.visitImportDeclaration.call(this,t)},t.prototype.visitVariableDeclaration=function(t){var i=t.name,r=i.text;this.skipVariableDeclaration||this.validateReferencesForVariable(r,i.getStart());n.prototype.visitVariableDeclaration.call(this,t)},t.prototype.visitInterfaceDeclaration=function(t){this.skipParameterDeclaration=!0;n.prototype.visitInterfaceDeclaration.call(this,t);this.skipParameterDeclaration=!1},t.prototype.visitIndexSignatureDeclaration=function(t){this.skipParameterDeclaration=!0;n.prototype.visitIndexSignatureDeclaration.call(this,t);this.skipParameterDeclaration=!1},t.prototype.visitVariableStatement=function(t){this.hasModifier(t.modifiers,76)&&(this.skipVariableDeclaration=!0);n.prototype.visitVariableStatement.call(this,t);this.skipVariableDeclaration=!1},t.prototype.visitFunctionDeclaration=function(t){var i=t.name.text;this.hasModifier(t.modifiers,76)||this.validateReferencesForVariable(i,t.name.getStart());n.prototype.visitFunctionDeclaration.call(this,t)},t.prototype.visitParameterDeclaration=function(t){var i=t.name.text;this.hasModifier(t.modifiers,106)||this.skipParameterDeclaration||!this.hasOption(OPTION_CHECK_PARAMETERS)||this.validateReferencesForVariable(i,t.name.getStart());n.prototype.visitParameterDeclaration.call(this,t)},t.prototype.visitPropertyDeclaration=function(t){if(t.name!=null&&t.name.kind===63){var i=t.modifiers,r=t.name.text;this.hasModifier(i,104)&&this.validateReferencesForVariable(r,t.name.getStart())}n.prototype.visitPropertyDeclaration.call(this,t)},t.prototype.visitMethodDeclaration=function(t){if(t.name!=null&&t.name.kind===63){var i=t.modifiers,r=t.name.text;this.hasModifier(i,104)&&this.validateReferencesForVariable(r,t.name.getStart())}n.prototype.visitMethodDeclaration.call(this,t)},t.prototype.hasModifier=function(n,t){var i,r,u;if(n==null)return!1;for(i=0,r=n.length;i<r;i++)if(u=n[i],u.kind===t)return!0;return!1},t.prototype.validateReferencesForVariable=function(n,t){var u=this.languageService.getReferencesAtPosition("file.ts",t),i,r;u.length<=1&&(i=Rule.FAILURE_STRING+"'"+n+"'",r=this.createFailure(t,n.length,i),this.addFailure(r))},t}(Lint.RuleWalker)