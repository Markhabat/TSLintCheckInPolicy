var __extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},OPTION_USE_TABS="tabs",OPTION_USE_SPACES="spaces",Rule=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.apply=function(n){return this.applyWithWalker(new IndentWalker(n,this.getOptions()))},t.FAILURE_STRING_TABS="tab indentation expected",t.FAILURE_STRING_SPACES="space indentation expected",t}(Lint.Rules.AbstractRule),IndentWalker;exports.Rule=Rule;IndentWalker=function(n){function t(t,i){n.call(this,t,i);this.hasOption(OPTION_USE_TABS)?(this.regExp=new RegExp(" "),this.failureString=Rule.FAILURE_STRING_TABS):this.hasOption(OPTION_USE_SPACES)&&(this.regExp=new RegExp("\t"),this.failureString=Rule.FAILURE_STRING_SPACES)}return __extends(t,n),t.prototype.visitSourceFile=function(n){var i=this,t,r;(this.hasOption(OPTION_USE_TABS)||this.hasOption(OPTION_USE_SPACES))&&(t=ts.createScanner(1,!1,n.text),r=n.getLineStarts(),r.forEach(function(n){var f;t.setTextPos(n);for(var r=t.scan(),u="",e=-1;r===5;){if(f=t.getStartPos(),f===e)break;e=f;u+=t.getTokenText();r=t.scan()}r!==2&&r!==3&&r!==4&&u.match(i.regExp)&&i.addFailure(i.createFailure(n,u.length,i.failureString))}))},t}(Lint.RuleWalker)