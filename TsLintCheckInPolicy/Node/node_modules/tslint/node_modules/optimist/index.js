function Argv(n,t){function o(n){i.showHelp();n&&console.error(n);process.exit(1)}function c(n){var t=minimist(n,r),f;return t.$0=i.$0,u._&&t._.length<u._&&o("Not enough non-option arguments: got "+t._.length+", need at least "+u._),f=[],Object.keys(u).forEach(function(n){t[n]||f.push(n)}),f.length&&o("Missing required arguments: "+f.join(", ")),h.forEach(function(n){try{n(t)===!1&&o("Argument check failed: "+n.toString())}catch(i){o(i)}}),t}function l(n){return Math.max.apply(null,n.map(function(n){return n.length}))}var i={},r,u,s,h,e,f;return t||(t=process.cwd()),i.$0=process.argv.slice(0,2).map(function(n){var i=rebase(t,n);return n.match(/^\//)&&i.length<n.length?i:n}).join(" "),process.env._!=undefined&&process.argv[1]==process.env._&&(i.$0=process.env._.replace(path.dirname(process.execPath)+"/","")),r={boolean:[],string:[],alias:{},"default":[]},i.boolean=function(n){return r.boolean.push.apply(r.boolean,[].concat(n)),i},i.string=function(n){return r.string.push.apply(r.string,[].concat(n)),i},i.default=function(n,t){return typeof n=="object"?Object.keys(n).forEach(function(t){i.default(t,n[t])}):r.default[n]=t,i},i.alias=function(n,t){return typeof n=="object"?Object.keys(n).forEach(function(t){i.alias(t,n[t])}):r.alias[n]=(r.alias[n]||[]).concat(t),i},u={},i.demand=function(n){return typeof n=="number"?(u._||(u._=0),u._+=n):Array.isArray(n)?n.forEach(function(n){i.demand(n)}):u[n]=!0,i},i.usage=function(n,t){return t||typeof n!="object"||(t=n,n=null),s=n,t&&i.options(t),i},h=[],i.check=function(n){return h.push(n),i},e={},i.describe=function(n,t){return typeof n=="object"?Object.keys(n).forEach(function(t){i.describe(t,n[t])}):e[n]=t,i},i.parse=function(n){return c(n)},i.option=i.options=function(n,t){if(typeof n=="object")Object.keys(n).forEach(function(t){i.options(t,n[t])});else{t.alias&&i.alias(n,t.alias);t.demand&&i.demand(n);typeof t.default!="undefined"&&i.default(n,t.default);(t.boolean||t.type==="boolean")&&i.boolean(n);(t.string||t.type==="string")&&i.string(n);var r=t.describe||t.description||t.desc;r&&i.describe(n,r)}return i},f=null,i.wrap=function(n){return f=n,i},i.showHelp=function(n){n||(n=console.error);n(i.help())},i.help=function(){var t=Object.keys(Object.keys(e).concat(Object.keys(u)).concat(Object.keys(r.default)).reduce(function(n,t){return t!=="_"&&(n[t]=!0),n},{})),n=t.length?["Options:"]:[];s&&n.unshift(s.replace(/\$0/g,i.$0),"");var o=t.reduce(function(n,t){return n[t]=[t].concat(r.alias[t]||[]).map(function(n){return(n.length>1?"--":"-")+n}).join(", "),n},{}),h=l(Object.keys(o).map(function(n){return o[n]||""})),c=l(Object.keys(e).map(function(n){return e[n]||""}));return t.forEach(function(t){var y=o[t],i=e[t]||"",a,v;f&&(i=wordwrap(h+4,f)(i).slice(h+4));var k=new Array(Math.max(h-y.length+3,0)).join(" "),p=new Array(Math.max(c-i.length+1,0)).join(" "),l=null;r.boolean[t]&&(l="[boolean]");r.string[t]&&(l="[string]");!f&&p.length>0&&(i+=p);var w="  "+y+k,s=[l,u[t]?"[required]":null,r.default[t]!==undefined?"[default: "+JSON.stringify(r.default[t])+"]":null,].filter(Boolean).join("  "),b=[i,s].filter(Boolean).join("  ");f&&(a=i.split("\n"),v=a.slice(-1)[0].length+(a.length===1?w.length:0),b=i+(v+s.length>f-2?"\n"+new Array(f-s.length+1).join(" ")+s:new Array(f-s.length-v+1).join(" ")+s));n.push(w+b)}),n.push(""),n.join("\n")},Object.defineProperty(i,"argv",{get:function(){return c(n)},enumerable:!0}),i}function rebase(n,t){for(var u,r=path.normalize(t).split("/").slice(1),f=path.normalize(n).split("/").slice(1),i=0;r[i]&&r[i]==f[i];i++);return r.splice(0,i),f.splice(0,i),u=path.normalize(f.map(function(){return".."}).concat(r).join("/")).replace(/\/$/,"").replace(/^$/,"."),u.match(/^[.\/]/)?u:"./"+u}var path=require("path"),minimist=require("minimist"),wordwrap=require("wordwrap"),inst=Argv(process.argv.slice(2)),exports;Object.keys(inst).forEach(function(n){Argv[n]=typeof inst[n]=="function"?inst[n].bind(inst):inst[n]});exports=module.exports=Argv;exports.rebase=rebase