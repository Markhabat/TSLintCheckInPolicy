var __extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},Rule=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.apply=function(n){return this.applyWithWalker(new NoSwitchCaseFallThroughWalker(n,this.getOptions()))},t.FAILURE_STRING_PART="Expected a 'break' before ",t}(Lint.Rules.AbstractRule),NoSwitchCaseFallThroughWalker;exports.Rule=Rule;NoSwitchCaseFallThroughWalker=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.visitSwitchStatement=function(t){var i=this,u=!1,r=t.clauses;r.forEach(function(n,t){var o=n.kind,f,e;o===194?(f=n,u=i.fallsThrough(f.statements),u&&f.statements.length>0&&r.length-1>t&&(i.fallThroughAllowed(r[t+1])||i.addFailure(i.createFailure(n.getEnd(),1,Rule.FAILURE_STRING_PART+"'case'")))):u&&!i.fallThroughAllowed(n)&&(e=Rule.FAILURE_STRING_PART+"'default'",i.addFailure(i.createFailure(r[t-1].getEnd(),1,e)))});n.prototype.visitSwitchStatement.call(this,t)},t.prototype.fallThroughAllowed=function(n){var u=n.getSourceFile().text,o=n.getChildCount(),e=n.getChildAt(0),i=ts.getLeadingCommentRanges(u,e.getFullStart()),t,r,f;if(i!=null)for(t=0;t<i.length;t++)if(r=i[t],f=u.substring(r.pos,r.end),f==="/* falls through */")return!0;return!1},t.prototype.fallsThrough=function(n){for(var i,t=0;t<n.length;t++)if(i=n[t].kind,i===173||i===178||i===174)return!1;return!0},t}(Lint.RuleWalker);exports.NoSwitchCaseFallThroughWalker=NoSwitchCaseFallThroughWalker